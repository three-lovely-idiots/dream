{include file="public/header" /}
<body class="gray-bg">
<div class="wrapper wrapper-content animated fadeInRight">
    <!-- Panel Other -->
    <div class="ibox float-e-margins">
        <div class="ibox-title">
            <h5>图片分类管理</h5>
        </div>
        <div class="ibox-content">
            <div id="toolbar" class="toolbar" style="position: relative;">
                <a href="javascript:;" class="btn btn-primary btn-refresh" title="刷新"><i class="fa fa-refresh"></i> </a> <a href="javascript:;" class="btn btn-success btn-add" title="添加"><i class="fa fa-plus"></i> 添加</a> <a href="javascript:;" class="btn btn-success btn-edit btn-disabled disabled" title="编辑"><i class="fa fa-pencil"></i> 编辑</a> <a href="javascript:;" class="btn btn-danger btn-del btn-disabled disabled" title="删除"><i class="fa fa-trash"></i> 删除</a> <a href="javascript:;" class="btn btn-danger btn-import" title="导入" id="btn-import-file" data-url="ajax/upload" data-mimetype="csv,xls,xlsx" data-multiple="false" initialized="true" style="position: relative; z-index: 1;"><i class="fa fa-upload"></i> 导入</a>                    <div id="html5_1d03qaeqt1m0vqm154p165q1pf24_container" class="moxie-shim moxie-shim-html5" style="position: absolute; top: 0px; left: 240px; width: 65px; height: 31px; overflow: hidden; z-index: 0;"><input id="html5_1d03qaeqt1m0vqm154p165q1pf24" type="file" style="font-size: 999px; opacity: 0; position: absolute; top: 0px; left: 0px; width: 100%; height: 100%;" accept="text/csv,.csv,application/vnd.ms-excel,.xls,application/vnd.openxmlformats-officedocument.spreadsheetml.sheet,.xlsx"></div></div>
            <div class="example-wrap">
                <div class="example">
                    <table id="cusTable">
                    </table>
                </div>
            </div>
            <!-- End Example Pagination -->
        </div>
    </div>
</div>
<!-- End Panel Other -->
</div>
{include file="public/script" /}
<script type="text/javascript">
    function initTable() {

        var table = $('#cusTable');
        Table.init({
            extend: {
                index_url: './index',
                add_url: './add',
                edit_url: './add',
                del_url: './del',
            }
        });
        //先销毁表格
        table.bootstrapTable('destroy');
        //初始化表格,动态从服务器加载数据
        table.bootstrapTable({
            url: $.fn.bootstrapTable.defaults.extend.index_url, //获取数据的地址
            sortName: 'id',
            columns: [ //这里可以单独拎出去
                [
                    {field: 'state', checkbox: true,},
                    {field: 'id', title: 'Id'},
                   // {field: 'admin_id', title: '管理员ID', visible: false, addClass: "selectpage", extend: "data-source='auth/admin/index' data-field='nickname'"},
                    {field: 'name', title: '分类名称',formatter: Table.formatter.tree_menu},
                    {field: 'parent', title: '父级分类名称'},

                    {
                        field: 'update_time',
                        title: '更新时间',
                        //formatter: Table.api.formatter.datetime,
                        operate: 'RANGE',
                        addclass: 'datetimerange',
                        sortable: true
                    },
                    {
                        field: 'operate',
                        title: '操作',
                        table: table,
                        events: Table.events.operate,
                        formatter: Table.formatter.operate
                    }
                ]
            ],
        });

        Table.bindEvent(table)
    }
    $(document).ready(function () {
        //调用函数，初始化表格
        initTable();
        //当点击查询按钮的时候执行
        $("#banner_id").bind("change", initTable);
    });
</script>
</body>
</html>
