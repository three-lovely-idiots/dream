{include file="public/header2" /}
<body class="childrenBody">
<form class="layui-form" style="width:80%;">
    <input type="hidden" class="layui-input" id="id" name="id" value="{php}if($data&&isset($data['id'])){ echo $data['id']; } {/php}" >
    <div class="layui-form-item layui-row layui-col-xs12">
        <label class="layui-form-label">产品名称</label>
        <div class="layui-input-block">
            <input type="text" class="layui-input" name="name" value="{php}if($data&&isset($data['name'])){ echo $data['name']; } {/php}" lay-verify="required">
        </div>
    </div>
    <div class="layui-row">
        <div class="magb15 layui-col-md8 layui-col-xs12">
            <label class="layui-form-label">产品描述</label>
            <div class="layui-input-block">
                <textarea name="summary" id="summary" required lay-verify="required" placeholder="请输入" class="layui-textarea">{php}if($data&&isset($data['summary'])){ echo $data['summary']; } {/php}</textarea>
            </div>
        </div>
    </div>

    <div class="layui-form-item layui-row layui-col-xs12">
        <label class="layui-form-label">产品内容</label>
        <div class="layui-input-block">
            <textarea id="container" name ="content" ></textarea>
        </div>
    </div>


    <div class="layui-form-item layui-row layui-col-xs8">
        <label class="layui-form-label">产品价格(非负)</label>
        <div class="layui-input-block">
            <input class="layui-input updsymb" onkeyup="javascript:CheckInputIntFloat(this);" type="text" name="price" value="{php}if($data&&isset($data['price'])){ echo $data['price']; } {/php}" lay-verify="required">
        </div>
    </div>

    <div class="layui-form-item layui-row layui-col-xs8">
        <label class="layui-form-label">折后价格(非负)</label>
        <div class="layui-input-block">
            <input type="text" class="layui-input updsymb" name="discount_price" value="{php}if($data&&isset($data['discount_price'])){ echo $data['discount_price']; } {/php}" lay-verify="required"  onkeyup="javascript:CheckInputIntFloat(this);"/>
        </div>
    </div>

    <div class="layui-form-item layui-row layui-col-xs8">
        <label class="layui-form-label">产品销量(非负)</label>
        <div class="layui-input-block">
            <input class="layui-input updsymb" onkeyup="javascript:CheckInputIntFloat(this);" type="text" name="sale" value="{php}if($data&&isset($data['sale'])){ echo $data['sale']; } {/php}" lay-verify="required">
        </div>
    </div>

    <div class="layui-form-item layui-row layui-col-xs8">
        <label class="layui-form-label">库存量(非负)</label>
        <div class="layui-input-block">
            <input class="layui-input updsymb" onkeyup="javascript:CheckInputIntFloat(this);" type="text" name="stock" value="{php}if($data&&isset($data['stock'])){ echo $data['stock']; } {/php}" lay-verify="required">
        </div>
    </div>

    <div class="layui-form-item layui-row layui-col-xs8">
        <label class="layui-form-label">产品类型</label>
        <div class="layui-input-block">
            <select id="type" name="type" class="form-control" lay-verify="required">
                <option value="">请选择产品类型</option>
                <option value="0" {php}if(isset($data['type'])&&($data["type"] == 0)){echo "selected = 'true'";}{/php}>普通商品</option>
                <option value="1" {php}if(isset($data['type'])&&($data["type"] == 1)){echo "selected = 'true'";}{/php}>促销商品</option>
            </select>
        </div>
    </div>

    <div class="layui-form-item layui-row layui-col-xs8">
        <label class="layui-form-label">产品分类</label>
        <div class="layui-input-block">
            <select id="main_id" name="category_id" class="form-control" lay-filter="cats_type">
                <option value="">请选择产品分类</option>
                {php} foreach($category as $key => $value) { {/php}
                <option value="{php}echo $value['id'];{/php}" {php}if(isset($data['category_id'])&&($data['category_id'][0] == $value['id'])){echo "selected = true";}{/php}>{php}echo $value['name'];{/php}</option>
                {php} } {/php}
            </select>
        </div>
    </div>

    <div class="layui-form-item layui-row layui-col-xs7">
        <label class="layui-form-label">产品大图</label>
        <div class="layui-input-block">
            <input type="text" class="layui-input" id="main_img_url" name="main_img_url" value="{php}if($data&&isset($data['original_main_img_url'])){ echo $data['original_main_img_url']; } {/php}"  lay-verify="required">
            <input type="hidden" class="layui-input" id="img_id" value="{php}if($data&&isset($data['img_id'])){ echo $data['img_id']; } {/php}" name="img_id"  lay-verify="required">
            <div style="margin-top:7px;" class="layui-upload">
                <button type="button" class="layui-btn" id="test2">上传</button>
                <button type="button" class="layui-btn layui-btn-danger" data-image="img_url" data-input-url="main_img_url" data-input-id="img_id" id="choose">选择</button>
                <div class="layui-upload-list">
                    <img class="layui-upload-img demo2" id="img_url" src="{php}if($data&&isset($data['main_img_url'])){ echo $data['main_img_url']; } {/php}" width="150">
                    <p class="demoText"></p>
                </div>
            </div>
        </div>
    </div>

    <div class="layui-form-item layui-row layui-col-xs12">
        <div class="layui-input-block">
            <button type="submit" class="layui-btn layui-btn-sm" lay-submit lay-filter="addProduct">立即添加</button>
            <button type="reset" class="layui-btn layui-btn-sm layui-btn-primary">取消</button>
        </div>
    </div>
</form>
{include file="public/footer2" /}
<!-- 加载编辑器的容器 -->
<!--<script id="container" name="content" type="text/plain">这里写你的初始化内容</script>-->
<!-- 配置文件 -->
<script type="text/javascript" src="__NEWJS__/../neditor/neditor.config.js?ver={$ver}"></script>
<!-- 编辑器源码文件 -->
<script type="text/javascript" src="__NEWJS__/../neditor/neditor.all.js?ver={$ver}"></script>
<script type="text/javascript" charset="utf-8" src="__NEWJS__/../neditor/neditor.service.js?ver={$ver}"></script>
<!-- 实例化编辑器 -->
<script type="text/javascript">
    var ue = UE.getEditor('container',{
        initialFrameHeight:340,
        initialFrameWidth:560,
        maximumWords:1000,
        autoHeightEnabled:false
    });

    {php}if($data&& isset($data['content'])){{/php}
        ue.addListener("ready", function () {
            // editor准备好之后才可以使用
            ue.setContent('{:html_entity_decode($data["content"])}');
        });

             {php} } {/php}

</script>
<script>
    function CheckInputIntFloat(oInput) {
        if('' != oInput.value.replace(/\d{1,}\.{0,1}\d{0,}/,'')) {
            oInput.value = oInput.value.match(/\d{1,}\.{0,1}\d{0,}/) == null ? '' :oInput.value.match(/\d{1,}\.{0,1}\d{0,}/);
        }
    }
</script>
</body>
</html>